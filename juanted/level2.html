<!DOCTYPE html>
<html lang="en">
<head>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=VT323&display=swap" rel="stylesheet">
    <style>
        :root { --bg: #f7f7ff; --accent: #ffffff; }
        body { background: linear-gradient(135deg, var(--bg), #131112); min-height: 100vh; font-family: 'VT323'; color: white; transition: 0.8s; }
        .pixel-card { background: rgba(0,0,0,0.8); border: 4px solid var(--accent); cursor: pointer; transition: 0.3s; }
        .pixel-card:hover { transform: scale(1.05); box-shadow: 0 0 20px var(--accent); }
        .btn-pixel {
            background: var(--p-neon);
            border: none;
            color: whitesmoke;
            padding: 12 32px;
            transition: 0.3s;
            box-shadow: 5px 5px 0px #008f7a;
            align-self: center;
        }
        .pixel-box .content {
            text-align: left;
        }

        .btn-pixel:hover { transform: translate(-2px, -2px); box-shadow: 7px 7px 0px orange; }
        /* Pixel Border Styling */
        .pixel-box {
            border: 4px solid white;
            box-shadow: 4px 4px 0px #333;
            background: rgba(20, 20, 20, 0.9);
            position: relative;
        }
        /* Typewriter */
        .typewriter { overflow: hidden; border-right: .15em solid orange; white-space: nowrap; 
                      margin: 0 auto; letter-spacing: .15em; animation: typing 3.5s steps(40, end), blink-caret .75s step-end infinite; }
        @keyframes typing { from { width: 0 } to { width: 100% } }
        @keyframes blink-caret { from, to { border-color: transparent } 50% { border-color: orange; } }
        .nav-btn {
            position: fixed;
            top: 20px;
            z-index: 999;
        }

        .nav-btn.left { left: 20px; }
        .nav-btn.right { right: 20px; }

        .nav-control {
            font-size: 2rem;
            background: transparent;
            border: none;
            color: white;
        }

        .nav-control.locked {
            opacity: 0.3;
            pointer-events: none;
        }
        /* ===== PIXEL TOAST ===== */
        .pixel-toast {
            position: fixed;
            top: 25px;
            left: 50%;
            transform: translateX(-50%) translateY(-20px);
            background: #111;
            border: 4px solid #00ffcc;
            color: #00ffcc;
            font-family: 'VT323';
            font-size: 22px;
            letter-spacing: 2px;
            padding: 12px 28px;
            z-index: 9999;
            opacity: 0;
            pointer-events: none;
            box-shadow: 0 0 0 2px #000, 0 0 15px rgba(0,255,204,0.4);
            transition: all 0.35s ease;
        }

        .pixel-toast.show {
            opacity: 1;
            transform: translateX(-50%) translateY(0);
        }

        .pixel-toast.error {
            border-color: #ff3c3c;
            color: #ff3c3c;
        }

        .pixel-toast.warning {
            border-color: #ffcc00;
            color: #ffcc00;
        }

        .pixel-toast.success {
            border-color: #00ff88;
            color: #00ff88;
        }

        /* Selected Disguise Effect */
        .pixel-card.selected {
            border-color: #00ffcc;
            box-shadow: 0 0 20px #00ffcc;
            transform: scale(1.05);
        }

    </style>
</head>
<body id="game-body">
    <div id="pixelToast" class="pixel-toast">
        <span id="pixelToastText">SYSTEM MESSAGE</span>
    </div>

    <div class="nav-btn left">
        <button id="backBtn" class="nav-control">
            <i class="bi bi-arrow-left-circle"></i>
        </button>
    </div>

    <div class="nav-btn right">
        <button id="nextBtn" class="nav-control locked">
            <i class="bi bi-arrow-right-circle"></i>
        </button>
    </div>

    <div class="container py-5 text-center">
        <h1 class="display-4 text-white">PUMILI NG DISGUISE</h1>
        <div class="row g-4 justify-content-center">
            <div class="col-md-3">
                <div class="pixel-card p-4" onmouseover="changeTheme('#3626a7', '#ff331f')" onclick="select('Yound Stunna', this)">
                    <img src="/assets/avatar-4.png" class="img-fluid mb-3">
                    <h3>YOUNG STUNNA</h3>
                </div>
            </div>
            <div class="col-md-3">
                <div class="pixel-card p-4" onmouseover="changeTheme('#0582ca', '#00a6fb')" onclick="select('Sad Boy', this)">
                    <img src="/assets/avatar-2.png" class="img-fluid mb-3">
                    <h3>SAD BOY</h3>
                </div>
            </div>
            <div class="col-md-3">
                <div class="pixel-card p-4" onmouseover="changeTheme('#248232', '#2ba84a')" onclick="select('Taho Vendor', this)">
                    <img src="/assets/avatar-5.png" class="img-fluid mb-3">
                    <h3>TAHO VENDOR</h3>
                </div>
            </div>
        </div>
        <div class="pixel-box p-4 w-100 mt-5 mb-5 d-flex align-items-left">
            <div class="avatar border-end pe-3 me-3">
                <img src="/assets/avatar-3.png" width="80" alt="Juan">
            </div>
            <div class="content">
                <h4 class="text-warning">JUAN</h4>
                <p class="typewriter" id="dialogue">"Kailangan natin ng disguise. Ano sa tingin mo ang babagay?"</p>
            </div>
            <button class="btn btn-pixel ms-auto locked" id="continueBtn" onclick="goToLevel3()">
                MAGPATULOY
            </button>
        </div>
    </div>
    
    <script>
        function changeTheme(bg, accent) {
            document.body.style.setProperty('--bg', bg);
            document.body.style.setProperty('--accent', accent);
        }
        let selectedDisguise = null;

        function select(type, element){

            selectedDisguise = type;

            document.querySelectorAll('.pixel-card').forEach(c=>{
                c.classList.remove('selected');
            });

            element.classList.add('selected');

            document.getElementById('dialogue').innerText =
                "Perfect. Ang napili mong disguise ay " + type + ". Pwede na tayong umusad.";

            document.getElementById("nextBtn").onclick = function(){

                if(!selectedDisguise){
                    showToast("⚠ KAILANGAN MONG PUMILI NG DISGUISE", "error");
                    return;
                }

                goToLevel3();
            };

            document.getElementById('continueBtn').classList.remove('locked');

            showToast("✓ "+type.toUpperCase()+" SELECTED", "success");
        }

        function unlockNext(){
            document.getElementById("nextBtn").classList.remove("locked");
        }
        function showToast(message, type="error"){

            const toast = document.getElementById("pixelToast");
            const text = document.getElementById("pixelToastText");

            text.innerText = message;

            toast.classList.remove("error","success");
            toast.classList.add(type);

            toast.classList.add("show");

            setTimeout(()=>{
                toast.classList.remove("show");
            }, 2500);
        }

        function goToLevel3(){

            if(!selectedDisguise){
                showToast("⚠ PUMILI MUNA NG DISGUISE", "warning");
                return;
            }

            showToast("✓ NEXT TASK NA TAYO!", "success");

            setTimeout(()=>{
                location.href = "level3.html";
            }, 800);
        }

    </script>
</body>
</html>